<!-- <html>

<head>
  <title>Web3 Metamask Login</title>
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.ethers.io/dist/ethers.min.js"></script>
</head>

<body class="flex w-screen h-screen justify-center items-center">
  <div class="flex-col space-y-2 justify-center items-center">
    <button id='loginButton' onclick="" class="mx-auto rounded-md p-2 bg-purple-500 text-white">
      Login with MetaMask
    </button>
    <button id='buyCourse' onclick="" class="mx-auto rounded-md p-2 bg-purple-500 text-white">
      Buy Course
    </button>
    <p id='userWallet' class='text-lg text-gray-600 my-2'></p>
  </div>
<script src="transaction.js"> </script>
<script src="CourseOpeningContract.js">

</script>
  <script>

    
    window.userWalletAddress = null
    const loginButton = document.getElementById('loginButton')
    const userWallet = document.getElementById('userWallet')
    const buyCourse = document.getElementById('buyCourse')
    buyCourse.onclick = () => {
      // Check if MetaMask is installed and connected
      if (window.ethereum) {
        const ethereum = window.ethereum;
        
        // Request user's permission to connect
        ethereum.enable().then((accounts) => {
          const userAddress = accounts[0];

          // Now you can initiate a transaction and request approval
          // For example, using web3.js
          const web3 = new Web3(ethereum);
          const contract = new web3.eth.Contract(contractABI, contractAddress);

          contract.methods.someMethod().send({ from: userAddress })
            .on('transactionHash', (hash) => {
              // Transaction hash
            })
            .on('confirmation', (confirmationNumber, receipt) => {
              // Transaction confirmed
            })
            .on('error', (error) => {
              // Transaction error
            });
        });
      } else {
        // MetaMask is not available
      }

    }
    function toggleButton() {
      if (!window.ethereum) {
        loginButton.innerText = 'MetaMask is not installed'
        loginButton.classList.remove('bg-purple-500', 'text-white')
        loginButton.classList.add('bg-gray-500', 'text-gray-100', 'cursor-not-allowed')
        return false
      }

      loginButton.addEventListener('click', loginWithMetaMask)
    }

    async function loginWithMetaMask() {
      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })
        .catch((e) => {
          console.error(e.message)
          return
        })
      if (!accounts) { return }

      window.userWalletAddress = accounts[0]
      userWallet.innerText = window.userWalletAddress
      loginButton.innerText = 'Sign out of MetaMask'

      loginButton.removeEventListener('click', loginWithMetaMask)
      setTimeout(() => {
        loginButton.addEventListener('click', signOutOfMetaMask)
      }, 200)
    }

    function signOutOfMetaMask() {
      window.userWalletAddress = null
      userWallet.innerText = ''
      loginButton.innerText = 'Sign in with MetaMask'

      loginButton.removeEventListener('click', signOutOfMetaMask)
      setTimeout(() => {
        loginButton.addEventListener('click', loginWithMetaMask)
      }, 200)
    }

    window.addEventListener('DOMContentLoaded', () => {
      toggleButton()
    });
  </script>
</body>

</html> -->


<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learning Platform</title>
   <!-- <script src="https://cdn.ethers.io/dist/ethers.min.js"></script> -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
     integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
     integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
     crossorigin="anonymous"></script>
   <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
 
</head>
<style>
  body {
  background: url("https://images.unsplash.com/photo-1639322537504-6427a16b0a28?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTR8fGJsb2NrY2hhaW58ZW58MHx8MHx8fDA%3D&w=1000&q=80") no-repeat center center fixed;
  background-size: 100% 100%;
  height: 100%;
  position: absolute;
  width: 100%;
}
</style>
<body>
  <div class="d-flex justify-content-center align-items-center" style="min-height: 100vh;">
    <button type="button" class="btn btn-primary" onclick="login()">Login with Metamask</button>

</div>
  <script src="../js/index.js"></script>

</body>

</html>